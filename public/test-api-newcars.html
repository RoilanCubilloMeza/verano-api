<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Test API NewCars</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; overflow: auto; }
        h2 { color: #667eea; margin-top: 30px; }
        .success { color: green; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>üß™ Test API NewCars</h1>
    <div id="results"></div>
    
    <script>
        const API_BASE = 'https://verano-api.vercel.app/api';
        const results = document.getElementById('results');

        async function testAPI() {
            try {
                // Test 1: Brands
                results.innerHTML += '<h2>1. Testing /newcars/brands</h2>';
                const brandsRes = await fetch(`${API_BASE}/newcars/brands`);
                const brandsData = await brandsRes.json();
                results.innerHTML += `<pre>${JSON.stringify(brandsData, null, 2).substring(0, 500)}...</pre>`;
                
                if (brandsData.success && brandsData.data.length > 0) {
                    const firstBrand = brandsData.data[0];
                    results.innerHTML += `<p class="success">‚úÖ Primera marca: ${firstBrand.brandBrand} (ID: ${firstBrand.brandID})</p>`;
                    
                    // Test 2: Models
                    results.innerHTML += `<h2>2. Testing /newcars/models?brandID=${firstBrand.brandID}</h2>`;
                    const modelsRes = await fetch(`${API_BASE}/newcars/models?brandID=${firstBrand.brandID}`);
                    const modelsData = await modelsRes.json();
                    results.innerHTML += `<pre>${JSON.stringify(modelsData, null, 2)}</pre>`;
                    
                    if (modelsData.success && modelsData.data && modelsData.data.length > 0) {
                        const firstModel = modelsData.data[0];
                        results.innerHTML += `<p class="success">‚úÖ Primer modelo: ${firstModel.modelDescription} (ID: ${firstModel.modelID})</p>`;
                        
                        // Test 3: Versions
                        results.innerHTML += `<h2>3. Testing /newcars/versions?modelID=${firstModel.modelID}</h2>`;
                        const versionsRes = await fetch(`${API_BASE}/newcars/versions?modelID=${firstModel.modelID}`);
                        const versionsData = await versionsRes.json();
                        results.innerHTML += `<pre>${JSON.stringify(versionsData, null, 2)}</pre>`;
                        
                        if (versionsData.success && versionsData.data && versionsData.data.length > 0) {
                            results.innerHTML += `<p class="success">‚úÖ Primera versi√≥n: ${versionsData.data[0].versionDescription}</p>`;
                        } else {
                            results.innerHTML += `<p class="error">‚ö†Ô∏è No hay versiones para este modelo</p>`;
                        }
                    } else {
                        results.innerHTML += `<p class="error">‚ö†Ô∏è No hay modelos para esta marca</p>`;
                    }
                } else {
                    results.innerHTML += `<p class="error">‚ùå No se pudieron cargar las marcas</p>`;
                }
                
                // Test 4: Categories
                results.innerHTML += '<h2>4. Testing /newcars/categories</h2>';
                const categoriesRes = await fetch(`${API_BASE}/newcars/categories`);
                const categoriesData = await categoriesRes.json();
                results.innerHTML += `<pre>${JSON.stringify(categoriesData, null, 2).substring(0, 300)}...</pre>`;
                results.innerHTML += `<p class="success">‚úÖ Categor√≠as cargadas: ${categoriesData.data.length}</p>`;
                
            } catch (error) {
                results.innerHTML += `<p class="error">‚ùå Error: ${error.message}</p>`;
                console.error('Error completo:', error);
            }
        }

        testAPI();
    </script>
</body>
</html>
